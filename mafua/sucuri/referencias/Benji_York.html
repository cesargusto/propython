
<!-- saved from url=(0076)http://benjiyork.com/blog/2008/02/programmable-python-syntax-via-source.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Benji York</title>
    <link rel="stylesheet" type="text/css" href="./Benji_York_files/main.css">
    
    <meta http-equiv="imagetoolbar" content="false">

    <!-- OpenID -->
    <link rel="openid.server" href="http://www.myopenid.com/server">
    <link rel="openid.delegate" href="http://benji.york.myopenid.com/">

</head>
<body>
    <div class="navMenu">
        <a href="http://benjiyork.com/who.html">who</a><br>
        <a href="http://benjiyork.com/what.html">&nbsp;what</a><br>
        <a href="http://benjiyork.com/blog">&nbsp;&nbsp;blog</a><br>
        <!--<a href="/resume.html">&nbsp;&nbsp;&nbsp;resum&eacute;</a><br>-->
        <a href="http://benjiyork.com/contact.html">&nbsp;&nbsp;&nbsp;contact</a><br>
        <a href="http://benjiyork.com/cv.html">&nbsp;&nbsp;&nbsp;&nbsp;curriculum vitae</a><br>
    </div>
    
        <div class="content">



  
    <div class="date-header">Saturday, February 23, 2008</div>
  

  <!-- Begin .post -->
  <div class="post"><a name="6553134087862337442"></a>
         
    <h2 class="post-title">
 
  Programmable Python Syntax via Source Encodings
 
    </h2>
    

    <div class="post-body">
      <div>
        <div style="clear:both;"></div>Because of my recent forays into Common Lisp and Haskell this recent <a href="http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/546539">recipe</a> on ASPN piqued my interest.  It demonstrates using Python source file encodings as a hook for introducing alternate Python syntax.   Here's the simplest example of the technique I could come up with:<br><br><span style="font-weight: bold;">codec.py</span>:<br><pre>import codecs<br><br>class StreamReader(codecs.StreamReader):<br>   def decode(self, input, errors='strict'):<br>       output = input.replace('until ', 'while not ')<br>       output = output.replace('++', '+= 1')<br>       return unicode(output), len(input)<br><br>def get_my_codec(name):<br>   if name == 'play-language':<br>       return (codecs.utf_8_encode, None, StreamReader, None)<br><br>codecs.register(get_my_codec)<br><br></pre>The above creates a codec called "play-language" and defines a very, very simple-minded source code transformation.  For actual use, you'd need to work harder at parsing the code.<br><br>Now, if you create a file named play1.py with these contents:<br><pre># coding=play-language<br><br>c = 0<br>until c == 10:<br>   print c<br>   c++<br><br></pre>And execute this from a command line:<br><pre>python -c 'import codec1;import play1'</pre><br>You'll get this output:<br><pre>0<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9</pre><div style="clear:both; padding-bottom:0.25em"></div>
      </div>
    </div>

    <p class="post-footer">
      <em>posted by Benji York at <a href="./Benji_York_files/Benji_York.html" title="permanent link">10:25 AM</a></em>
        
    </p>

  </div>
  <!-- End .post -->




      <a href="http://benjiyork.com/blog/atom.xml"><img src="./Benji_York_files/atom_feed_button.gif"></a>
      </div>
      <!-- <script type="text/javascript" src="http://technorati.com/embed/4wtspqm2cm.js"> </script> -->
    

    <!-- begin Google Analytics code -->
    <script src="./Benji_York_files/urchin.js" type="text/javascript">
    <script type="text/javascript">
    _uacct = "UA-185807-1";
    urchinTracker();
    </script>
    <!-- end Google Analytics code -->



</body></html>